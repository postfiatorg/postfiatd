<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>rippled: Post Fiat Node Setup Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">rippled
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Post Fiat Node Setup Guide </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md236"></a>
Prerequisites</h1>
<p >Before starting, ensure you have:</p>
<ul>
<li><b>Operating System</b>: Fresh Ubuntu Server (22.04 LTS or later recommended)</li>
<li><b>Hardware Requirements</b>:<ul>
<li>Minimum 2 CPU cores</li>
<li>4GB RAM</li>
<li>100GB storage space</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md237"></a>
Installation Steps</h1>
<h2><a class="anchor" id="autotoc_md238"></a>
1. Install Docker Compose</h2>
<p >Update your system and install Docker Compose:</p>
<div class="fragment"><div class="line">sudo apt update</div>
<div class="line">sudo apt install docker-compose</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md239"></a>
2. Set Up the Node Directory</h2>
<p >Create the necessary directory structure and download the configuration:</p>
<div class="fragment"><div class="line">mkdir -p /opt/postfiatd</div>
<div class="line">cd /opt/postfiatd</div>
<div class="line">wget https://raw.githubusercontent.com/postfiatorg/postfiatd/testnet_candidate/scripts/docker-compose.yml</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md240"></a>
3. Start the Node</h2>
<p >Launch the Post Fiat node using Docker Compose:</p>
<div class="fragment"><div class="line">docker-compose up -d</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md241"></a>
4. Verify Installation</h2>
<p >Check that the Docker container is running properly:</p>
<div class="fragment"><div class="line">docker-compose ps</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md242"></a>
Node Management</h1>
<h2><a class="anchor" id="autotoc_md243"></a>
Viewing Logs</h2>
<p >To monitor node activity:</p>
<div class="fragment"><div class="line">docker-compose logs</div>
</div><!-- fragment --><blockquote class="doxtable">
<p >&zwj;<b>Note</b>: Full logs are also available in <code>/opt/postfiatd/logs</code> </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md244"></a>
Modifying Configuration</h2>
<p >To update the node configuration:</p>
<ol type="1">
<li><b>Stop the container</b>: <div class="fragment"><div class="line">docker-compose down</div>
</div><!-- fragment --></li>
<li><b>Edit the configuration file</b>: <div class="fragment"><div class="line">nano /var/lib/docker/volumes/postfiatd_postfiatd-config/_data/postfiatd.cfg</div>
</div><!-- fragment --></li>
<li><b>Restart the container</b>: <div class="fragment"><div class="line">docker-compose up -d</div>
</div><!-- fragment --></li>
</ol>
<h1><a class="anchor" id="autotoc_md245"></a>
Running as a Validator</h1>
<p >The container will run a postfiatd node that connects to the Post Fiat testnet by default. To operate as a validator, you'll need to create a validator token using the validator keys tool.</p>
<h2><a class="anchor" id="autotoc_md246"></a>
Validator keys tool</h2>
<ul>
<li>Validator keys tool is present in the postfiatd docker image. To use it run bash shell inside postfiatd running Docker container: <div class="fragment"><div class="line">docker exec -it postfiatd bash</div>
<div class="line">validator-keys --help</div>
</div><!-- fragment --> A validator uses a public/private key pair. The validator is identified by the public key. The private key should be tightly controlled. It is used to:</li>
<li>sign tokens authorizing a postfiatd server to run as the validator identified by this public key.</li>
<li>sign revocations indicating that the private key has been compromised and the validator public key should no longer be trusted.</li>
</ul>
<p >Each new token invalidates all previous tokens for the validator public key. The current token needs to be present in the postfiatd config file.</p>
<p >Servers that trust the validator will adapt automatically when the token changes.</p>
<h1><a class="anchor" id="autotoc_md247"></a>
Validator Keys</h1>
<p >When first setting up a validator, use the <code>validator-keys</code> tool to generate its key pair:</p>
<div class="fragment"><div class="line">$ validator-keys create_keys</div>
</div><!-- fragment --><p >Sample output: </p><div class="fragment"><div class="line">Validator keys stored in /home/ubuntu/.ripple/validator-keys.json</div>
</div><!-- fragment --><p >Inside of validator-keys.json enter your domain.</p>
<p >Keep the key file in a secure but recoverable location, such as an encrypted USB flash drive. Do not modify its contents.</p>
<h1><a class="anchor" id="autotoc_md248"></a>
Validator Token</h1>
<p >After first creating the validator keys or if the previous token has been compromised, use the <code>validator-keys</code> tool to create a new validator token:</p>
<div class="fragment"><div class="line">$ validator-keys create_token</div>
</div><!-- fragment --><p >Sample output:</p>
<div class="fragment"><div class="line">Update postfiatd.cfg file with these values:</div>
<div class="line"> </div>
<div class="line"># validator public key: nHUtNnLVx7odrz5dnfb2xpIgbEeJPbzJWfdicSkGyVw1eE5GpjQr</div>
<div class="line"> </div>
<div class="line">[validator_token]</div>
<div class="line">eyJ2YWxpZGF0aW9uX3NlY3J|dF9rZXkiOiI5ZWQ0NWY4NjYyNDFjYzE4YTI3NDdiNT</div>
<div class="line">QzODdjMDYyNTkwNzk3MmY0ZTcxOTAyMzFmYWE5Mzc0NTdmYT|kYWY2IiwibWFuaWZl</div>
<div class="line">c3QiOiJKQUFBQUFGeEllMUZ0d21pbXZHdEgyaUNjTUpxQzlnVkZLaWxHZncxL3ZDeE</div>
<div class="line">hYWExwbGMyR25NaEFrRTFhZ3FYeEJ3RHdEYklENk9NU1l1TTBGREFscEFnTms4U0tG</div>
<div class="line">bjdNTzJmZGtjd1JRSWhBT25ndTlzQUtxWFlvdUorbDJWMFcrc0FPa1ZCK1pSUzZQU2</div>
<div class="line">hsSkFmVXNYZkFpQnNWSkdlc2FhZE9KYy9hQVpva1MxdnltR21WcmxIUEtXWDNZeXd1</div>
<div class="line">NmluOEhBU1FLUHVnQkQ2N2tNYVJGR3ZtcEFUSGxHS0pkdkRGbFdQWXk1QXFEZWRGdj</div>
<div class="line">VUSmEydzBpMjFlcTNNWXl3TFZKWm5GT3I3QzBrdzJBaVR6U0NqSXpkaXRROD0ifQ==</div>
</div><!-- fragment --><p >For a new validator, add the [validator_token] value to the postfiatd config file. For a pre-existing validator, replace the old [validator_token] value with the newly generated one. A valid config file may only contain one [validator_token] value. After the config is updated, restart postfiatd.</p>
<p >There is a hard limit of 4,294,967,293 tokens that can be generated for a given validator key pair.</p>
<h1><a class="anchor" id="autotoc_md249"></a>
Key Revocation</h1>
<p >If a validator private key is compromised, the key must be revoked permanently. To revoke the validator key, use the <code>validator-keys</code> tool to generate a revocation, which indicates to other servers that the key is no longer valid:</p>
<div class="fragment"><div class="line">$ validator-keys revoke_keys</div>
</div><!-- fragment --><p >Sample output:</p>
<div class="fragment"><div class="line">WARNING: This will revoke your validator keys!</div>
<div class="line"> </div>
<div class="line">Update postfiatd.cfg file with these values and restart postfiatd:</div>
<div class="line"> </div>
<div class="line"># validator public key: nHUtNnLVx7odrz5dnfb2xpIgbEeJPbzJWfdicSkGyVw1eE5GpjQr</div>
<div class="line"> </div>
<div class="line">[validator_key_revocation]</div>
<div class="line">JP////9xIe0hvssbqmgzFH4/NDp1z|3ShkmCtFXuC5A0IUocppHopnASQN2MuMD1Puoyjvnr</div>
<div class="line">jQ2KJSO/2tsjRhjO6q0QQHppslQsKNSXWxjGQNIEa6nPisBOKlDDcJVZAMP4QcIyNCadzgM=</div>
</div><!-- fragment --><p >Add the <code>[validator_key_revocation]</code> value to this validator's config and restart postfiatd. Rename the old key file and generate new validator keys and a corresponding validator token.</p>
<h1><a class="anchor" id="autotoc_md250"></a>
Signing</h1>
<p >The <code>validator-keys</code> tool can be used to sign arbitrary data with the validator key.</p>
<div class="fragment"><div class="line">$ validator-keys sign &quot;your data to sign&quot;</div>
</div><!-- fragment --><p >Sample output:</p>
<div class="fragment"><div class="line">B91B73536235BBA028D344B81DBCBECF19C1E0034AC21FB51C2351A138C9871162F3193D7C41A49FB7AABBC32BC2B116B1D5701807BE462D8800B5AEA4F0550D</div>
</div><!-- fragment --><ol type="1">
<li><b>Key Management</b>:<ul>
<li>Keys generated in <code>validator-keys.json</code> should be stored safely and separately from the validator token</li>
<li>Only the validator token should be used in the validator configuration file</li>
<li><b>Never expose your private keys</b> - keep them secure and backed up</li>
</ul>
</li>
<li><b>Validator status</b><ul>
<li>Once a validator is running successfully it should appear in the validator list in the explorer: <a href="https://explorer.testnet.postfiat.org/network/validators">https://explorer.testnet.postfiat.org/network/validators</a></li>
<li>Server status of the node can be checked locally by running server_info rpc: <div class="fragment"><div class="line">curl -k -X POST https://localhost:5005/ -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;method&quot;: &quot;server_info&quot;,&quot;params&quot;: [{}]}&#39;</div>
</div><!-- fragment --></li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md251"></a>
Security Best Practices</h2>
<ul>
<li>Store validator keys in a secure, offline location</li>
<li>Use the validator token (not private keys) in your configuration</li>
<li>Regularly backup your configuration and keys</li>
<li>Monitor your validator's performance and connectivity</li>
</ul>
<h1><a class="anchor" id="autotoc_md252"></a>
Troubleshooting</h1>
<p >If you encounter issues:</p>
<ol type="1">
<li>Check container status: <code>docker-compose ps</code></li>
<li>Review logs: <code>docker-compose logs</code> </li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
